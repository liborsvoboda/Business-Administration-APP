!function(n){"use strict";function a(n,t,i){"addEventListener"in window?n.addEventListener(t,i,!1):"attachEvent"in window&&n.attachEvent("on"+t,i)}function dt(n,t,i){"removeEventListener"in window?n.removeEventListener(t,i,!1):"detachEvent"in window&&n.detachEvent("on"+t,i)}function gt(n){return n.charAt(0).toUpperCase()+n.slice(1)}function or(n){var i,r,f,t=null,u=0,e=function(){u=rt();t=null;f=n.apply(i,r);t||(i=r=null)};return function(){var s=rt(),o;return u||(u=s),o=w-(s-u),i=this,r=arguments,0>=o||o>w?(t&&(clearTimeout(t),t=null),u=s,f=n.apply(i,r),t||(i=r=null)):t||(t=setTimeout(e,o)),f}}function ni(n){return nt+"["+tt+"] "+n}function t(n){lt&&"object"==typeof console&&console.log(ni(n))}function o(n){"object"==typeof console&&console.warn(ni(n))}function sr(){hr();t("Initialising iFrame ("+location.href+")");cr();ar();ut("background",wi);ut("padding",bi);kr();ri();ui();vr();gr();fi();y=dr();h("init","Init message from host page");pt()}function hr(){function i(n){return"true"===n?!0:!1}var t=gi.substr(tr).split(":");tt=t[0];ot=n!==t[1]?Number(t[1]):ot;g=n!==t[2]?i(t[2]):g;lt=n!==t[3]?i(t[3]):lt;c=n!==t[4]?Number(t[4]):c;e=n!==t[6]?i(t[6]):e;d=t[7];r=n!==t[8]?t[8]:r;wi=t[9];bi=t[10];vt=n!==t[11]?Number(t[11]):vt;y.enable=n!==t[12]?i(t[12]):!1;at=n!==t[13]?t[13]:at;u=n!==t[14]?t[14]:u}function cr(){function i(){var n=window.iFrameResizer;t("Reading data from page: "+JSON.stringify(n));yt="messageCallback"in n?n.messageCallback:yt;pt="readyCallback"in n?n.readyCallback:pt;p="targetOrigin"in n?n.targetOrigin:p;r="heightCalculationMethod"in n?n.heightCalculationMethod:r;u="widthCalculationMethod"in n?n.widthCalculationMethod:u}function n(n,i){return"function"==typeof n&&(t("Setup custom "+i+"CalcMethod"),bt[i]=n,n="custom"),n}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(i(),r=n(r,"height"),u=n(u,"width"));t("TargetOrigin for parent set to: "+p)}function lr(n,t){return-1!==t.indexOf("-")&&(o("Negative CSS value ignored for "+n),t=""),t}function ut(i,r){n!==r&&""!==r&&"null"!==r&&(document.body.style[i]=r,t("Body "+i+' set to "'+r+'"'))}function ar(){n===d&&(d=ot+"px");ut("margin",lr("margin",d))}function vr(){document.documentElement.style.height="";document.body.style.height="";t('HTML & body height set to "auto"')}function i(n){var i={add:function(t){function i(){h(n.eventName,n.eventType)}kt[t]=i;a(window,t,i)},remove:function(n){var t=kt[n];delete kt[n];dt(window,n,t)}};n.eventNames&&Array.prototype.map?(n.eventName=n.eventNames[0],n.eventNames.map(i[n.method])):i[n.method](n.eventName);t(gt(n.method)+" event listener: "+n.eventType)}function ti(n){i({method:n,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]});i({method:n,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]});i({method:n,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]});i({method:n,eventType:"Input",eventName:"input"});i({method:n,eventType:"Mouse Up",eventName:"mouseup"});i({method:n,eventType:"Mouse Down",eventName:"mousedown"});i({method:n,eventType:"Orientation Change",eventName:"orientationchange"});i({method:n,eventType:"Print",eventName:["afterprint","beforeprint"]});i({method:n,eventType:"Ready State Change",eventName:"readystatechange"});i({method:n,eventType:"Touch Start",eventName:"touchstart"});i({method:n,eventType:"Touch End",eventName:"touchend"});i({method:n,eventType:"Touch Cancel",eventName:"touchcancel"});i({method:n,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]});i({method:n,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]});i({method:n,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]});"child"===at&&i({method:n,eventType:"IFrame Resized",eventName:"resize"})}function ii(n,i,r,u){return i!==n&&(n in r||(o(n+" is not a valid option for "+u+"CalculationMethod."),n=i),t(u+' calculation method set to "'+n+'"')),n}function ri(){r=ii(r,ct,s,"height")}function ui(){u=ii(u,er,l,"width")}function fi(){!0===e?(ti("add"),tu()):t("Auto Resize disabled")}function yr(){t("Disable outgoing messages");rr=!1}function pr(){t("Remove event listener: Message");dt(window,"message",yi)}function wr(){null!==st&&st.disconnect()}function ei(){ti("remove");wr();clearInterval(nr)}function br(){yr();pr();!0===e&&ei()}function kr(){var n=document.createElement("div");n.style.clear="both";n.style.display="block";document.body.appendChild(n)}function dr(){function u(){return{x:window.pageXOffset!==n?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==n?window.pageYOffset:document.documentElement.scrollTop}}function e(n){var t=n.getBoundingClientRect(),i=u();return{x:parseInt(t.left,10)+parseInt(i.x,10),y:parseInt(t.top,10)+parseInt(i.y,10)}}function i(i){function s(n){var i=e(n);t("Moving to in page link (#"+r+") at x: "+i.x+" y: "+i.y);f(i.y,i.x,"scrollToOffset")}var r=i.split("#")[1]||i,u=decodeURIComponent(r),o=document.getElementById(u)||document.getElementsByName(u)[0];n!==o?s(o):(t("In page link (#"+r+") not found in iFrame, so sending to parent"),f(0,0,"inPageLink","#"+r))}function r(){""!==location.hash&&"#"!==location.hash&&i(location.href)}function s(){function n(n){function t(n){n.preventDefault();i(this.getAttribute("href"))}"#"!==n.getAttribute("href")&&a(n,"click",t)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),n)}function h(){a(window,"hashchange",r)}function c(){setTimeout(r,ht)}function l(){Array.prototype.forEach&&document.querySelectorAll?(t("Setting up location.hash handlers"),s(),h(),c()):o("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return y.enable?l():t("In page linking not enabled"),{findTarget:i}}function gr(){t("Enable public methods");fu.parentIFrame={autoResize:function(n){return!0===n&&!1===e?(e=!0,fi()):!1===n&&!0===e&&(e=!1,ei()),e},close:function(){f(0,0,"close");br()},getId:function(){return tt},getPageInfo:function(n){"function"==typeof n?(wt=n,f(0,0,"pageInfo")):(wt=function(){},f(0,0,"pageInfoStop"))},moveToAnchor:function(n){y.findTarget(n)},reset:function(){vi("parentIFrame.reset")},scrollTo:function(n,t){f(t,n,"scrollTo")},scrollToOffset:function(n,t){f(t,n,"scrollToOffset")},sendMessage:function(n,t){f(0,0,"message",JSON.stringify(n),t)},setHeightCalculationMethod:function(n){r=n;ri()},setWidthCalculationMethod:function(n){u=n;ui()},setTargetOrigin:function(n){t("Set targetOrigin: "+n);p=n},size:function(n,t){var i=""+(n?n:"")+(t?","+t:"");h("size","parentIFrame.size("+i+")",n,t)}}}function oi(){0!==c&&(t("setInterval: "+c+"ms"),nr=setInterval(function(){h("interval","setInterval: "+c)},Math.abs(c)))}function nu(){function s(n){function i(n){!1===n.complete&&(t("Attach listeners to "+n.src),n.addEventListener("load",e,!1),n.addEventListener("error",o,!1),r.push(n))}"attributes"===n.type&&"src"===n.attributeName?i(n.target):"childList"===n.type&&Array.prototype.forEach.call(n.target.querySelectorAll("img"),i)}function c(n){r.splice(r.indexOf(n),1)}function u(n){t("Remove listeners from "+n.src);n.removeEventListener("load",e,!1);n.removeEventListener("error",o,!1);c(n)}function f(t,i,r){u(t.target);h(i,r+": "+t.target.src,n,n)}function e(n){f(n,"imageLoad","Image loaded")}function o(n){f(n,"imageLoadFailed","Image load failed")}function l(n){h("mutationObserver","mutationObserver: "+n[0].target+" "+n[0].type);n.forEach(s)}function a(){var n=document.querySelector("body");return i=new v(l),t("Create body MutationObserver"),i.observe(n,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),i}var r=[],v=window.MutationObserver||window.WebKitMutationObserver,i=a();return{disconnect:function(){"disconnect"in i&&(t("Disconnect body MutationObserver"),i.disconnect(),r.forEach(u))}}}function tu(){var n=0>c;window.MutationObserver||window.WebKitMutationObserver?n?oi():st=nu():(t("MutationObserver not supported in this browser!"),oi())}function ft(n,t){function r(n){var i,r;return/^\d+(px)?$/i.test(n)?parseInt(n,pi):(i=t.style.left,r=t.runtimeStyle.left,t.runtimeStyle.left=t.currentStyle.left,t.style.left=n||0,n=t.style.pixelLeft,t.style.left=i,t.runtimeStyle.left=r,n)}var i=0;return t=t||document.body,"defaultView"in document&&"getComputedStyle"in document.defaultView?(i=document.defaultView.getComputedStyle(t,null),i=null!==i?i[n]:0):i=r(t.currentStyle[n]),parseInt(i,pi)}function iu(n){n>w/2&&(w=2*n,t("Event throttle increased to "+w+"ms"))}function et(n,i){for(var o=i.length,f=0,e=0,s=gt(n),r=rt(),u=0;o>u;u++)f=i[u].getBoundingClientRect()[n]+ft("margin"+s,i[u]),f>e&&(e=f);return r=rt()-r,t("Parsed "+o+" HTML elements"),t("Element position calculated in "+r+"ms"),iu(r),e}function k(n){return[n.bodyOffset(),n.bodyScroll(),n.documentElementOffset(),n.documentElementScroll()]}function si(n,t){function r(){return o("No tagged elements ("+t+") found on page"),document.querySelectorAll("body *")}var i=document.querySelectorAll("["+t+"]");return 0===i.length&&r(),et(n,i)}function hi(){return document.querySelectorAll("body *")}function ci(i,e,o,h){function y(){v=c;b=a;f(v,b,i)}function p(){function t(n,t){var i=Math.abs(n-t)<=vt;return!i}return c=n!==o?o:s[r](),a=n!==h?h:l[u](),t(v,c)||g&&t(b,a)}function w(){return!(i in{init:1,interval:1,size:1})}function k(){return r in ir||g&&u in ir}function d(){t("No change in size detected")}function nt(){w()&&k()?vi(e):i in{interval:1}||d()}var c,a;p()||"init"===i?(li(),y()):nt()}function h(n,i,r,u){function f(){n in{reset:1,resetPage:1,init:1}||t("Trigger event: "+i)}function e(){return it&&n in uu}e()?t("Trigger event cancelled: "+n):(f(),"init"===n?ci(n,i,r,u):eu(n,i,r,u))}function li(){it||(it=!0,t("Trigger event lock on"));clearTimeout(fr);fr=setTimeout(function(){it=!1;t("Trigger event lock off");t("--")},ht)}function ai(n){v=s[r]();b=l[u]();f(v,b,n)}function vi(n){var i=r;r=ct;t("Reset trigger event: "+n);li();ai("reset");r=i}function f(i,r,u,f,e){function o(){n===e?e=p:t("Message targetOrigin: "+e)}function s(){var s=i+":"+r,o=tt+":"+s+":"+u+(n!==f?":"+f:"");t("Sending message to host page ("+o+")");ur.postMessage(nt+o,e)}!0===rr&&(o(),s())}function yi(n){function e(){return nt===(""+n.data).substr(0,tr)}function u(){return n.data.split("]")[1].split(":")[0]}function r(){return n.data.substr(n.data.indexOf(":")+1)}function s(){return!("undefined"!=typeof module&&module.exports)&&"iFrameResize"in window}function f(){return n.data.split(":")[2]in{"true":1,"false":1}}function c(){var t=u();t in i?i[t]():s()||f()||o("Unexpected message ("+n.data+")")}function l(){!1===ki?c():f()?i.init():t('Ignored message of type "'+u()+'". Received before initialization.')}var i={init:function(){function r(){gi=n.data;ur=n.source;sr();ki=!1;setTimeout(function(){di=!1},ht)}"interactive"===document.readyState||"complete"===document.readyState?r():(t("Waiting for page ready"),a(window,"readystatechange",i.initFromParent))},reset:function(){di?t("Page reset ignored by init"):(t("Page size reset by host page"),ai("resetPage"))},resize:function(){h("resizeParent","Parent window requested size check")},moveToAnchor:function(){y.findTarget(r())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var n=r();t("PageInfoFromParent called from parent: "+n);wt(JSON.parse(n));t(" --")},message:function(){var n=r();t("MessageCallback called from parent: "+n);yt(JSON.parse(n));t(" --")}};e()&&l()}function ru(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}if("undefined"!=typeof window){var e=!0,pi=10,wi="",ot=0,d="",st=null,bi="",g=!1,uu={resize:1,click:1},ht=128,ki=!0,v=1,ct="bodyOffset",r=ct,di=!0,gi="",y={},c=32,nr=null,lt=!1,nt="[iFrameSizer]",tr=nt.length,tt="",ir={max:1,min:1,bodyScroll:1,documentElementScroll:1},at="child",rr=!0,ur=window.parent,p="*",vt=0,it=!1,fr=null,w=16,b=1,er="scroll",u=er,fu=window,yt=function(){o("MessageCallback function not defined")},pt=function(){},wt=function(){},bt={height:function(){return o("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return o("Custom width calculation function not defined"),document.body.scrollWidth}},kt={},rt=Date.now||function(){return(new Date).getTime()},s={bodyOffset:function(){return document.body.offsetHeight+ft("marginTop")+ft("marginBottom")},offset:function(){return s.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return bt.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,k(s))},min:function(){return Math.min.apply(null,k(s))},grow:function(){return s.max()},lowestElement:function(){return Math.max(s.bodyOffset(),et("bottom",hi()))},taggedElement:function(){return si("bottom","data-iframe-height")}},l={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return bt.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(l.bodyScroll(),l.documentElementScroll())},max:function(){return Math.max.apply(null,k(l))},min:function(){return Math.min.apply(null,k(l))},rightMostElement:function(){return et("right",hi())},taggedElement:function(){return si("right","data-iframe-width")}},eu=or(ci);a(window,"message",yi);ru()}}();